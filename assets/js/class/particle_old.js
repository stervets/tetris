// Generated by CoffeeScript 1.7.1
(function() {
  Application.Particle = (function() {
    Particle.prototype.params = {
      distance: 150,
      lifetime: 300,
      particlesMax: 10,
      stackSize: 100
    };

    Particle.prototype.particleHtml = $('#tplParticle').html();

    Particle.prototype.sparkHtml = $('#tplSpark').html();

    Particle.prototype.$el = null;

    Particle.prototype.play = false;

    Particle.prototype.stepTime = 10;

    Particle.prototype.$particle = [];

    Particle.prototype.pointer = 0;

    Particle.prototype.launch = function(x, y) {
      var $p, i, _i, _ref, _results;
      _results = [];
      for (i = _i = 0, _ref = rand(0, this.particlesMax); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {
        $p = this.$particle[this.pointer];
        $p.css({
          top: y,
          left: x,
          opacity: 1,
          rotate: "" + (rand(-180, 180)) + "deg",
          scale: rand(50, 150) / 100,
          color: "rgb(" + (rand(100, 255)) + "," + (rand(100, 255)) + "," + (rand(100, 255)) + ")"
        });
        this.$el.append($p);
        _.delay(function($p, params, x, y) {
          $p.css({
            top: y + rand(-params.distance, params.distance),
            left: x + rand(-params.distance, params.distance),
            opacity: 0,
            rotate: "" + (rand(-180, 180)) + "deg"
          });
          return null;
        }, this.stepTime, $p, this.params, x, y);
        if (++this.pointer >= this.$particle.length) {
          _results.push(this.pointer = 0);
        } else {
          _results.push(void 0);
        }
      }
      return _results;
    };

    function Particle(params) {
      var i, _i, _ref;
      _(this.params).extend(params);
      this.$el = $(this.particleHtml);
      this.$particle = [];
      for (i = _i = 1, _ref = this.params.stackSize; 1 <= _ref ? _i <= _ref : _i >= _ref; i = 1 <= _ref ? ++_i : --_i) {
        this.$particle.push($(this.sparkHtml).css({
          transitionDuration: "" + this.params.lifetime + "ms"
        }));
      }
    }

    return Particle;

  })();

}).call(this);

//# sourceMappingURL=particle_old.map
