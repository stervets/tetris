// Generated by CoffeeScript 1.7.1
(function() {
  Application.Particle = (function() {
    Particle.prototype.params = {
      distanceX: 200,
      distanceY: 30,
      lifetime: 300,
      particlesMax: 5,
      stackSize: 120
    };

    Particle.prototype.particleHtml = $('#tplParticle').html();

    Particle.prototype.sparkHtml = $('#tplSpark').html();

    Particle.prototype.$el = null;

    Particle.prototype.play = false;

    Particle.prototype.stepTime = 10;

    Particle.prototype.$particle = [];

    Particle.prototype.pointer = 0;

    Particle.prototype.launch = function(x, y, color) {
      var $p;
      $p = this.$particle[this.pointer];
      $p.css({
        top: y,
        left: x,
        opacity: 1,
        scale: rand(50, 150) / 100,
        color: color,
        transition: 'none'
      });
      _.delay(function($p, params, x, y) {
        $p.css({
          top: y + rand(-params.distanceY, params.distanceY),
          left: x + rand(-params.distanceX, params.distanceX),
          opacity: 0,
          color: '#FFFFFF',
          transition: "all " + params.lifetime + "ms ease"
        });
        return null;
      }, this.stepTime, $p, this.params, x, y);
      if (++this.pointer >= this.$particle.length) {
        return this.pointer = 0;
      }
    };

    function Particle(params) {
      var $spark, i, _i, _ref;
      _(this.params).extend(params);
      this.$el = $(this.particleHtml);
      this.$particle = [];
      for (i = _i = 1, _ref = this.params.stackSize; 1 <= _ref ? _i <= _ref : _i >= _ref; i = 1 <= _ref ? ++_i : --_i) {
        $spark = $(this.sparkHtml).css({
          transitionDuration: "" + this.params.lifetime + "ms"
        });
        this.$particle.push($spark);
        this.$el.append($spark);
      }
    }

    return Particle;

  })();

}).call(this);

//# sourceMappingURL=particle.map
